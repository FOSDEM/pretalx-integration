{% extends "orga/base.html" %}
{% load compress %}
{% load i18n %}
{% load static %}
{% block content %}
    <h2>Audit log</h2>
    <div>
    <div class="submit-group search-submit-group"><form method="get" class="search-form">
	{{  form.n.as_field_group }}
	{{  form.max_date.as_field_group }}
	{{  form.model.as_field_group }}
        <button type="submit" class="btn btn-info btn-search">Submit</button></form></div>
    {% for event in events %}
    <dd>model</dd>: {{ event.short_model }} (id: {{ event.pgh_obj_id }})</br>
        time: {{ event.pgh_created_at.isoformat}}</br>
        {% if event.pgh_diff %}
	diff: {% for k,v in event.pgh_diff.items %}'{{ k }}:<span class="old">{{ v }}</span>=&gt;<span class="new">{{ v }}</span>'{% endfor %}</br>
        {% else %}
            data: {{ event.pgh_data }}</br>
        {% endif %}
    {%if event.pgh_context  %}
        user: {{ event.user }} ({{ event.user.pk }})</br>
        url: {{ event.pgh_context.url }}
    {%endif%}
    <hr/>
    {% endfor %}
    </div>
{% endblock %}
